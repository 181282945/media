<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <title></title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>

    <!-- bootstrap & fontawesome -->
    <link rel="stylesheet" href="/assets/css/bootstrap.css"/>
    <link rel="stylesheet" href="/components/font-awesome/css/font-awesome.css"/>

    <!-- text fonts -->
    <link rel="stylesheet" href="/assets/css/ace-fonts.css"/>

    <!-- ace styles -->
    <link rel="stylesheet" href="/assets/css/ace.css" class="ace-main-stylesheet" id="main-ace-style"/>

    <!--[if lte IE 9]>
    <link rel="stylesheet" href="/assets/css/ace-part2.css" class="ace-main-stylesheet"/>
    <![endif]-->

    <!--[if lte IE 9]>
    <link rel="stylesheet" href="/assets/css/ace-ie.css"/>
    <![endif]-->

    <!-- inline styles related to this page -->
    <style>
        /* some elements used in demo only */
        .spinner-preview {
            width: 100px;
            height: 100px;
            text-align: center;
            margin-top: 60px;
        }

        .dropdown-preview {
            margin: 0 5px;
            display: inline-block;
        }

        .dropdown-preview > .dropdown-menu {
            display: block;
            position: static;
            margin-bottom: 5px;
        }


    </style>

    <!-- ace settings handler -->
    <script src="/assets/js/ace-extra.js"></script>

    <!-- HTML5shiv and Respond.js for IE8 to support HTML5 elements and media queries -->

    <!--[if lte IE 8]>
    <script src="/components/html5shiv/dist/html5shiv.min.js"></script>
    <script src="/components/respond/dest/respond.min.js"></script>
    <![endif]-->



    <link href="/css/base.css" type="text/css" rel="stylesheet"/>


</head>
<body class="no-skin">
<div class="main-container">
    <div class="main-content">
        <div class="row">
            <div class="col-sm-10 col-sm-offset-1">
                <div class="login-container">
                    <div class="center">
                        <h1>用户信息</h1>
                    </div>
                    <form id="addForm" method="post"  class="form-inline" role="form"  action="/base/invoice/userinfo/u/update">
                        <fieldset>
                            <input type="text" name="id" class="form-control hidden"  th:value="${currentUserInfo}? ${currentUserInfo.id}" />

                            <div class="form-group" style="margin-bottom: 5px">
                                <label class="form-label">昵&emsp;&emsp;称&ensp;:&ensp;</label>
                                <input type="text" name="usrname" class="form-control"  placeholder="昵称" th:value="${currentUserInfo}? ${currentUserInfo.usrname}" />
                                <i class="ace-icon fa glyphicon-asterisk red"></i>
                            </div>


                            <div class="form-group" style="margin-bottom: 5px">
                                <label class="form-label">手&emsp;&emsp;机&ensp;:&ensp;</label>
                                <input type="text" name="mobilePhone" class="form-control"  placeholder="手机" th:value="${currentUserInfo}? ${currentUserInfo.mobilePhone}"/>
                                <i class="ace-icon fa glyphicon-asterisk red"></i>
                            </div>



                            <div class="form-group" style="margin-bottom: 5px">
                                <label class="form-label">固&emsp;&emsp;话&ensp;:&ensp;</label>
                                <input type="text" name="telephone" class="form-control"  placeholder="固话" th:value="${currentUserInfo}? ${currentUserInfo.telephone}"/>
                            </div>


                            <div class="form-group" style="margin-bottom: 5px">
                                <label class="form-label">邮&emsp;&emsp;箱&ensp;:&ensp;</label>
                                <input type="text" name="email" class="form-control"  placeholder="邮箱" th:value="${currentUserInfo}? ${currentUserInfo.email}"/>
                            </div>

                            <div>
                                <button type="reset" class="width-30 pull-left btn btn-sm">
                                    <i class="ace-icon fa fa-refresh"></i>
                                    <span class="bigger-110">重置</span>
                                </button>

                                <button type="submit" name="btnAjaxSubmit" id="btnAjaxSubmit" class="width-65 pull-right btn btn-sm btn-success">
                                    <span class="bigger-110">提交</span>
                                    <i class="ace-icon fa fa-arrow-right icon-on-right"></i>
                                </button>
                            </div>
                        </fieldset>
                    </form>
                </div>
            </div><!-- /.col -->
        </div><!-- /.row -->
    </div><!-- /.main-content -->
</div><!-- /.main-container -->

<!-- basic scripts -->

<!--[if !IE]> -->
<script src="/components/jquery/dist/jquery.js"></script>

<!-- <![endif]-->

<!--[if IE]>
<script src="/components/jquery.1x/dist/jquery.js"></script>
<![endif]-->
<script type="text/javascript">
    if ('ontouchstart' in document.documentElement) document.write("<script src='/components/_mod/jquery.mobile.custom/jquery.mobile.custom.js'>" + "<" + "/script>");
</script>
<script src="/components/bootstrap/dist/js/bootstrap.js"></script>

<!-- page specific plugin scripts -->

<!--[if lte IE 8]>
<script src="/components/ExplorerCanvas/excanvas.js"></script>
<![endif]-->

<!-- 自定义JS -->

<script src="/js/jquery.form.min.js"></script>
<script src="/js/jquery.validate.min.js"></script>
<script src="/js/jquery.validate.extend.js"></script>
<script src="/js/layer/layer.js"></script>
<script src="/js/base.js"></script>

<!-- inline scripts related to this page -->
<script type="text/javascript">



    //让当前表单调用validate方法，实现表单验证功能
    $("#addForm").validate({
//            debug:true, //调试模式，即使验证成功也不会跳转到目标页面
        rules: { //配置验证规则，key就是被验证的dom对象，value就是调用验证的方法(也是json格式)
            usrname: {
                required: true, //必填。如果验证方法不需要参数，则配置为true
                rangelength: [1, 15]
            },
            mobilePhone: {
                required: true,
                rangelength: [11, 15],
                digits:true
//                isMobile: true
            },
            telephone: {
                required: false,
                rangelength: [1, 15]
            },
            email: {
                required: false,
                rangelength: [1, 20],
                email: true
            }
        },
        messages: {
            usrname: {
                required: "昵称长度为1-15个字符",
                rangelength: "昵称长度为1-15个字符"
            },
            mobilePhone: {
                required: "手机号码长度为11-15个字符",
                rangelength: "手机号码长度为11-15个字符",
                digits: "只能为数字"
            },
            telephone: {
                required: false,
                rangelength: "固定电话不超过15个字符"
            },
            email: {
                email: "邮箱用户名+分隔符@+邮箱注册的网站域名地址",
                rangelength: "长度不得超过20",
            }
        },
        submitHandler: function(form) {
            jQuery(form).ajaxSubmit(function(data){
                if(data.operateCode == "F"){
                    layerAlertMsg(data.message);
                }else if(data.operateCode == "S"){
                    layer.msg('修改成功', {icon: 1});
                    setTimeout(function(){
                        parent.location.href = "/center";
                    }, 2000);
                }
            });
        }
    });

</script>
</body>
</html>
